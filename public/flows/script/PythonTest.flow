attributes:
  ArrowStyle: ArrowEnd
  NodeStyle: BoxIcon
  PROCESS_VISIBILITY: PUBLIC
  PerformanceLevel: '0'
  display: x=31,y=22,w=108,h=26
steps:
- id: s1
  name: Start
  path: flowbee-demo.start
  attributes:
    display: x=50,y=90,w=60,h=40
  links:
  - id: l1
    attributes:
      display: type=Elbow,x=140,y=110,xs=114&166,ys=110&110
    to: s4
- id: s2
  name: Stop
  path: flowbee-demo.stop
  attributes:
    display: x=680,y=90,w=60,h=40
- id: s3
  name: Exec
  path: flowbee-demo.python.ScriptActivity
  attributes:
    Output Documents: '["person"]'
    Rule: |
      runtimeContext.logDebug('Executing ' + runtimeContext.activity.name)

      mrid = runtimeContext.getMasterRequestId()

      intInput = intInput + 4
      intLocal = 7

      boolInput = not boolInput

      # simple set variable
      name = person.getName()
      message = 'Hello'

      # update json content
      person.setFirstName('Scott')
      person.setLastName('Fitzgerald')

      return 'onward'
    SCRIPT: Python
    display: x=320,y=80,w=100,h=60
  links:
  - id: l2
    attributes:
      display: type=Elbow,x=434,y=88,xs=424&496,ys=110&110
    to: s5
    result: onward
- id: s4
  name: Which?
  path: flowbee-demo.decision
  attributes:
    Expression: testCase
    SCRIPT: Python
    display: x=170,y=80,w=80,h=60
  links:
  - id: l3
    attributes:
      display: type=Elbow,x=264,y=89,xs=254&316,ys=110&110
    to: s3
    result: exec
  - id: l5
    attributes:
      display: type=Elbow,x=216,y=153,xs=210&210,ys=144&176
    to: s6
    result: decide
- id: s5
  name: Use Module
  path: flowbee-demo.python.ScriptActivity
  attributes:
    Rule: |
      runtimeContext.logDebug('Executing ' + runtimeContext.activity.name)

      from tests.script.pymodule import square, greet

      intInput = square(intInput)

      message = greet(name, message)
    SCRIPT: Python
    display: x=500,y=80,w=100,h=60
  links:
  - id: l4
    attributes:
      display: type=Elbow,x=640,y=110,xs=604&676,ys=110&110
    to: s2
- id: s6
  name: Boolean
  path: flowbee-demo.decision
  attributes:
    Expression: testCase == 'decide'
    SCRIPT: Python
    display: x=170,y=180,w=80,h=60
  links:
  - id: l6
    attributes:
      display: type=Elbow,x=255,y=191,xs=254&296,ys=210&210
    to: s7
    result: 'false'
  - id: l7
    attributes:
      display: type=Elbow,x=218,y=249,xs=210&210,ys=244&276
    to: s8
    result: 'true'
- id: s7
  name: No Way
  path: flowbee-demo.stop
  attributes:
    display: x=300,y=190,w=60,h=40
- id: s8
  name: Stop
  path: flowbee-demo.stop
  attributes:
    display: x=180,y=280,w=60,h=40
variables:
  boolInput:
    type: java.lang.Boolean
  intInput:
    type: java.lang.Integer
  intLocal:
    type: java.lang.Integer
  message:
    type: java.lang.String
  mrid:
    type: java.lang.String
  name:
    type: java.lang.String
  person:
    type: io.limberest.json.Jsonable
  testCase:
    type: java.lang.String
