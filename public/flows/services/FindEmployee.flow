attributes:
  ArrowStyle: ArrowEnd
  NodeStyle: BoxIcon
  PROCESS_VISIBILITY: SERVICE
  PerformanceLevel: '3'
  START_TRANSITION_ID: '2346892'
  display: x=38,y=31,w=131,h=27
steps:
- id: S1
  name: Start
  descriptor: flowbee-demo.start
  attributes:
    Parameters: sapId=${request.sapId};workstationId=${request.workstationId}
    display: x=43,y=102,w=60,h=40
  links:
  - id: L1
    attributes:
      display: type=Elbow,x=165,y=129,xs=107&152,ys=122&122
    event: FINISH
    to: S5
- id: S5
  name: "Real\r\nLookup?"
  descriptor: flowbee-demo.script.ScriptEvaluator
  attributes:
    Expression: sapId != 'DHO115360' && workstationId != 'dxoakes'
    SCRIPT: Groovy
    display: x=156,y=86,w=78,h=76
  links:
  - id: L4
    attributes:
      display: type=Elbow,x=300,y=112,xs=238&361,ys=112&112
    event: FINISH
    to: S4
    result: 'true'
  - id: L5
    attributes:
      display: type=Elbow,x=292,y=189,xs=230&265&265&364,ys=143&143&185&185
    event: FINISH
    to: S3
    result: 'false'
- id: S2
  name: Stop
  descriptor: flowbee-demo.stop
  attributes:
    display: x=577,y=180,w=60,h=40
- id: S3
  name: Lookup
  descriptor: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Output Documents: response
    Rule: ""
    SCRIPT: Groovy
    display: x=368,y=166,w=100,h=60
  links:
  - id: L2
    attributes:
      display: type=Elbow,x=527,y=201,xs=472&573,ys=200&200
    event: FINISH
    to: S2
- id: S6
  name: "Populate\r\nObject"
  descriptor: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Output Documents: employee#response
    Rule: ""
    SCRIPT: Groovy
    display: x=553,y=81,w=106,h=67
  links:
  - id: L6
    attributes:
      display: type=Elbow,x=607,y=154,xs=607&607,ys=152&176
    event: FINISH
    to: S2
- id: S4
  name: LDAP Lookup
  descriptor: flowbee-demo.adapter.ldap.LdapAdapter
  attributes:
    AppCuid: prop:LDAP/AppCUID
    AppPassword: prop:LDAP/AppPassword
    BaseDn: prop:LDAP/BaseDN
    Bindings: firstName=givenName;lastName=sn;sapId=saploginid;workstationId=uid
    LdapHost: prop:LDAP/Host
    LdapPort: prop:LDAP/Port
    PostScriptLang: Groovy
    PreScriptLang: Groovy
    SearchContext: ou=People
    SearchFilter: '(#{sapId == '''' || sapId == null ? ''uid='' : ''saploginId=''}#{sapId == '''' || sapId == null ? workstationId : sapId})'
    display: x=365,y=79,w=100,h=60
  links:
  - id: L3
    attributes:
      display: type=Elbow,x=539,y=132,xs=469&549,ys=110&110
    event: FINISH
    to: S6
variables:
  employee:
    type: java.lang.Object
  firstName:
    type: java.lang.String
  lastName:
    type: java.lang.String
  request:
    type: javax.xml.bind.JAXBElement
  requestHeaders:
    type: java.util.Map<String,String>
  response:
    type: model.StringDocument
  sapId:
    type: java.lang.String
  workstationId:
    type: java.lang.String
