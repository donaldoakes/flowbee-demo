attributes:
  ABORT_TRANSITION_ID: '192270'
  ERROR_PROCESS_ID: '282656'
  ERROR_TRANSITION_ID: '192269'
  PROCESS_VISIBILITY: PUBLIC
  SLA: '20'
  SLA_UNIT: Minutes
  START_TRANSITION_ID: '2325977'
  Transition with no Label: Acts as Default
  display: x=50,y=40,w=199,h=27
steps:
- id: s6
  name: Process Start
  path: flowbee-demo.start
  attributes:
    display: x=424,y=34,w=32,h=32
  links:
  - id: l41
    attributes:
      display: type=Elbow,x=440,y=102,xs=440&440,ys=70&135
    to: s33
- id: s9
  name: N = 11
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Rule: N = 11;
    SCRIPT: Groovy
    display: x=950,y=535,w=25,h=23
  links:
  - id: l8
    attributes:
      display: type=Elbow,x=966,y=600,xs=962&1041,ys=562&654
    to: s20
- id: s11
  name: Process Finish
  path: flowbee-demo.stop
  attributes:
    display: x=488,y=880,w=32,h=32
- id: s10
  name: Invoke process that errs
  path: flowbee-demo.process.InvokeSubProcessActivity
  attributes:
    display: x=475,y=623,w=20,h=20
    processname: tests.workflow/TestSubProcess2.proc
    processversion: '[0,1)'
    synchronous: 'TRUE'
  links:
  - id: l21
    attributes:
      display: type=ElbowV,x=491,y=774,xs=491&491,ys=647&876
    to: s11
- id: s25
  name: Get orderId
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    OsgiBundleSymbolicName: workflow
    Output Documents: order
    Rule: ""
    SCRIPT: Groovy
    display: x=825,y=661,w=25,h=23
  links:
  - id: l2
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=508,y=776,xs=837&504,ys=688&876
    to: s11
- id: s7
  name: Sum = 121
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Rule: |
      Sum = 121;
    SCRIPT: Groovy
    display: x=1092,y=533,w=25,h=23
  links:
  - id: l10
    attributes:
      display: type=Elbow,x=1045,y=599,xs=1104&1041,ys=560&654
    to: s20
- id: s20
  name: Synch both branches
  path: flowbee-demo.sync.SynchronizationActivity
  attributes:
    Synced Activities: N = 11#Sum = 121
    display: x=1029,y=658,w=24,h=24
  links:
  - id: l9
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=507,y=775,xs=1041&504,ys=686&876
    to: s11
- id: s17
  name: Read order
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Output Documents: order
    OutputVariables: order
    ReadOnlyVariables: order#xmldata#launcher
    Rule: ""
    SCRIPT: Groovy
    display: x=827,y=366,w=25,h=23
  links:
  - id: l3
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=841,y=533,xs=838&838,ys=393&657
    to: s25
- id: s8
  name: Another Dummy
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Rule: |
      print("Hello");
    SCRIPT: Groovy
    display: x=1219,y=367,w=25,h=23
  links:
  - id: l14
    attributes:
      display: type=Elbow,x=1189,y=457,xs=1231&1187,ys=394&524
    to: s18
  - id: l15
    attributes:
      TRANSITION_DELAY: 5s
      TRANSITION_RETRY_COUNT: '0'
      display: type=Elbow,x=1235,y=452,xs=1231&1268,ys=394&526
    to: s19
- id: s26
  name: Display result
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Rule: print("Returned value is " +Sum);
    SCRIPT: Groovy
    display: x=223,y=654,w=30,h=24
  links:
  - id: l31
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=243,y=771,xs=238&504,ys=682&876
    to: s11
- id: s12
  name: Raise ABORT event
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    RETURN_CODE: BTN
    Rule: |
      return "ABORT:";
    SCRIPT: Groovy
    display: x=343,y=479,w=24,h=24
  links:
  - id: l12
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=405,y=747,xs=371&371&484&484,ys=507&780&780&876
    to: s11
- id: s21
  name: Invoke remote process
  path: flowbee-demo.process.InvokeSubProcessActivity
  attributes:
    display: x=60,y=490,w=31,h=29
    processname: tests.workflow/TestSubProcess.proc
    processversion: '[0,1)'
    synchronous: 'TRUE'
    variables: argument=$N;newvar=;testxml=$xmldata;result=$Sum
  links:
  - id: l34
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=198,y=667,xs=75&238,ys=523&650
    to: s26
- id: s16
  name: Another sync
  path: flowbee-demo.sync.SynchronizationActivity
  attributes:
    Sync Expression: A18 || A19
    Synced Activities: N 13#Sum 169
    display: x=1220,y=659,w=24,h=24
  links:
  - id: l18
    attributes:
      TRANSITION_DELAY: 7s
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=508,y=774,xs=1232&504,ys=687&876
    to: s11
- id: s22
  name: Invoke single process
  path: flowbee-demo.process.InvokeSubProcessActivity
  attributes:
    display: x=223,y=505,w=28,h=25
    processname: tests.workflow/TestSubProcess.proc
    processversion: '[0,1)'
    synchronous: 'TRUE'
    variables: argument=$N;testxml=$xmldata;result=$Sum
  links:
  - id: l30
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=241,y=592,xs=237&237,ys=534&650
    to: s26
- id: s4
  name: Set remote argument
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Output Documents: xmldata#maptest#intarraytest
    Rule: |+
      /*$xmldata.MINUTES = '2";
       $intarraytest = "1~1~2~3~5~8";
       $maptest = "R=red~G=green~B=blue";
       */
      xmldata = '<ROOT>\n'
      xmldata = xmldata+'   <MINUTES>2</MINUTES>\n'
      xmldata = xmldata+'</ROOT>\n'

      intarraytest = new java.util.ArrayList<Integer>(6);
      intarraytest.add( new Integer(1))
      intarraytest.add( new Integer(1))
      intarraytest.add( new Integer(2))
      intarraytest.add( new Integer(3))
      intarraytest.add( new Integer(5))
      intarraytest.add( new Integer(8))

      maptest = new HashMap<String, String>()
      maptest.put('R', 'red')
      maptest.put('G', 'green')
      maptest.put('B', 'blue')

    SCRIPT: Groovy
    display: x=66,y=391,w=25,h=23
  links:
  - id: l37
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=79,y=460,xs=78&78,ys=418&486
    to: s21
- id: s24
  name: Dummy Resume B
  path: flowbee-demo.ControlledActivityImpl
  attributes:
    Documentation: "<html>\r\n  <head>\r\n\r\n  </head>\r\n  <body>\r\n    <p style=\"margin-top: 0\">\r\n      \r\n    </p>\r\n  </body>\r\n</html>\r\n"
    display: x=718,y=664,w=24,h=16
  links:
  - id: l24
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=504,y=778,xs=730&504,ys=684&876
    to: s11
- id: s19
  name: Sum 169
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Rule: |
      Sum = 169;
    SCRIPT: Groovy
    display: x=1256,y=530,w=25,h=23
  links:
  - id: l17
    attributes:
      display: type=Elbow,x=1236,y=598,xs=1268&1232,ys=557&655
    to: s16
- id: s23
  name: Set input argument
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Output Documents: xmldata
    Rule: ""
    SCRIPT: Groovy
    display: x=223,y=392,w=29,h=29
  links:
  - id: l35
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=243,y=467,xs=237&237,ys=425&501
    to: s22
- id: s15
  name: Create argument
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Rule: println("Hello, world!")
    SCRIPT: Groovy
    display: x=478,y=435,w=24,h=24
  links:
  - id: l20
    attributes:
      display: type=ElbowV,x=486,y=533,xs=486&486,ys=463&619
    to: s10
- id: s13
  name: Scripts with syntax error
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Output Documents: intarraytest#maptest#xmldata
    Rule: |-
      /*$xmldata.MINUTES = '2";
       $intarraytest = "1~1~2~3~5~8";
       $maptest = "R=red~G=green~B=blue";
       */
      xmldata = '<ROOT>\n'
      xmldata = xmldata+'   <MINUTES>2</MINUTES>\n'
      xmldata = xmldata+'</ROOT>\n'

      intarraytest = new java.util.ArrayList<Integer>(6);
      intarraytest.add( new Integer(1))
      intarraytest.add( new Integer(1))
      intarraytest.add( new Integer(2))
      intarraytest.add( new Integer(3))
      intarraytest.add( new Integer(5))
      intarraytest.add( new Integer(8))

      maptest = new HashMap<String, String>()
      maptest.put('R', 'red')
      maptest.put('G', 'green')
      maptest.put('B', 'blue')


      syntax error here
    SCRIPT: Groovy
    display: x=680,y=369,w=30,h=28
  links:
  - id: l22
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=695,y=516,xs=695&730,ys=401&660
    event: Resume
    to: s24
    result: B
  - id: l25
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=640,y=517,xs=695&627,ys=401&661
    to: s14
- id: s2
  name: Dummy - to fork out
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Rule: print("Hello!");
    SCRIPT: Groovy
    display: x=1022,y=364,w=25,h=23
  links:
  - id: l6
    attributes:
      display: type=Elbow,x=966,y=456,xs=1034&962,ys=391&531
    to: s9
  - id: l7
    attributes:
      TRANSITION_DELAY: 5s
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=1032,y=439,xs=1032&1032&1102&1102,ys=391&463&463&529
    to: s7
- id: s14
  name: Dummy Resume A
  path: flowbee-demo.ControlledActivityImpl
  attributes:
    Documentation: "<html>\r\n  <head>\r\n\r\n  </head>\r\n  <body>\r\n    <p style=\"margin-top: 0\">\r\n      \r\n    </p>\r\n  </body>\r\n</html>\r\n"
    display: x=615,y=665,w=24,h=16
  links:
  - id: l23
    attributes:
      TRANSITION_DELAY: '0'
      TRANSITION_RETRY_COUNT: '0'
      display: type=ElbowV,x=498,y=782,xs=627&504,ys=685&876
    to: s11
- id: s18
  name: N 13
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Rule: |
      N = 13;
    SCRIPT: Groovy
    display: x=1175,y=528,w=25,h=23
  links:
  - id: l16
    attributes:
      display: type=Elbow,x=1191,y=597,xs=1187&1232,ys=555&655
    to: s16
- id: s33
  name: multiple processes ?
  path: flowbee-demo.decision
  attributes:
    Expression: processCase
    SCRIPT: Groovy
    display: x=408,y=139,w=69,h=25
  links:
  - id: l43
    attributes:
      display: type=ElbowV,x=81,y=344,xs=442&78,ys=168&387
    to: s4
    result: RemoteSubProcess
  - id: l44
    attributes:
      display: type=ElbowV,x=633,y=311,xs=442&695,ys=168&365
    to: s13
    result: DEFAULT
  - id: l45
    attributes:
      display: type=ElbowV,x=756,y=330,xs=442&839,ys=168&362
    to: s17
    result: ServiceOrder
  - id: l46
    attributes:
      display: type=ElbowV,x=948,y=332,xs=442&1034,ys=168&360
    to: s2
    result: Synchronization
  - id: l47
    attributes:
      display: type=ElbowV,x=1092,y=325,xs=442&1231,ys=168&363
    to: s8
    result: Sync with custom expr
  - id: l48
    attributes:
      display: type=ElbowV,x=472,y=367,xs=442&490,ys=168&431
    to: s15
    result: error handler delegation
  - id: l49
    attributes:
      display: type=ElbowV,x=376,y=396,xs=440&440&371&371,ys=168&349&349&475
    to: s12
    result: AbortEvent
  - id: l50
    attributes:
      display: type=ElbowV,x=239,y=352,xs=442&237,ys=168&388
    to: s23
    result: SingleSubProcess
  - id: l51
    attributes:
      display: type=ElbowV,x=980,y=170,xs=481&1356&1356,ys=168&168&693
    to: s34
    result: DocumentBinding
- id: s34
  name: Invoke service lvl9 process
  path: flowbee-demo.process.InvokeSubProcessActivity
  attributes:
    display: x=1332,y=697,w=20,h=20
    processname: tests.workflow/ServiceLevel_9.proc
    processversion: '[0,1)'
    synchronous: 'TRUE'
    variables: processCase=$processCase
  links:
  - id: l52
    attributes:
      display: type=ElbowV,x=910,y=730,xs=1342&504,ys=721&876
    to: s11
subflows:
- id: f3
  name: Cancellation Handler
  attributes:
    EMBEDDED_PROCESS_TYPE: Cancellation Handler
    ENTRY_TRANSITION_ID: '2325978'
    PROCESS_VISIBILITY: EMBEDDED
    START_TRANSITION_ID: '2325900'
    display: x=729,y=40,w=281,h=86
  steps:
  - id: s31
    name: Start
    path: flowbee-demo.start
    attributes:
      display: x=770,y=72,w=32,h=32
    links:
    - id: l40
      attributes:
        display: type=Elbow,x=869,y=87,xs=806&928,ys=87&87
      to: s32
  - id: s32
    name: Stop
    path: flowbee-demo.stop
    attributes:
      display: x=932,y=71,w=32,h=32
  variables:
    EmbeddedSubProcessTaskAction:
      type: java.lang.String
- id: f2
  name: Exception Handler
  attributes:
    ENTRY_TRANSITION_ID: '2325979'
    PROCESS_VISIBILITY: EMBEDDED
    START_TRANSITION_ID: '2325912'
    TaskName: A Test Task
    WORK_DISPLAY_INFO_TestFalloutProcess: x=499,y=110,w=31,h=27
    WORK_DISPLAY_INFO_TestMainProcess: x=494,y=29,w=24,h=24
    display: x=1053,y=39,w=310,h=84
  steps:
  - id: s29
    name: Process Start
    path: flowbee-demo.start
    attributes:
      display: x=1073,y=64,w=32,h=32
    links:
    - id: l39
      attributes:
        display: type=Straight,x=1145,y=80,xs=1105&1186,ys=80&80
      to: s28
  - id: s30
    name: Process Finish
    path: flowbee-demo.stop
    attributes:
      display: x=1301,y=65,w=32,h=32
  - id: s28
    name: My fallout task
    path: flowbee-demo.task.CustomManualTaskActivity
    attributes:
      STATUS_AFTER_EVENT: Cancelled
      TASK_PAGELET: base/CustomManualTask.pagelet
      TASK_TEMPLATE: tests.workflow/A Task For Testing Variables.task
      TASK_TEMPLATE_assetVersion: '[0.2,1)'
      Task Name: General Fallout
      display: x=1186,y=66,w=30,h=28
    links:
    - id: l38
      attributes:
        display: type=Straight,x=1258,y=80,xs=1216&1301,ys=80&81
      to: s30
  variables:
    EmbeddedSubProcessTaskAction:
      type: java.lang.String
variables:
  BTN:
    type: java.lang.String
  N:
    type: java.lang.Integer
  Sum:
    type: java.lang.Integer
  intarraytest:
    type: java.util.List<Integer>
  launcher:
    type: org.apache.xmlbeans.XmlObject
  maptest:
    type: java.util.Map<String,String>
  order:
    type: org.w3c.dom.Document
  orderId:
    type: java.lang.String
  processCase:
    type: java.lang.String
  xmldata:
    type: org.w3c.dom.Document
