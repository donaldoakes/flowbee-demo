attributes:
  ArrowStyle: ArrowEnd
  NodeStyle: BoxIcon
  PROCESS_VISIBILITY: PUBLIC
  display: x=34,y=34,w=257,h=27
steps:
- id: s1
  name: Start
  path: flowbee-demo.start
  attributes:
    display: x=25,y=104,w=60,h=40
  links:
  - id: l1
    attributes:
      display: type=Elbow,x=28,y=-41,xs=89&144,ys=124&124
    to: s5
- id: s2
  name: Stop
  path: flowbee-demo.stop
  attributes:
    display: x=590,y=103,w=60,h=40
- id: s3
  name: Invoke Subs
  path: flowbee-demo.process.InvokeHeterogeneousProcessActivity
  attributes:
    DELAY_BETWEEN: '6'
    Execution Plan: plan
    Force Parallel Execution: 'true'
    STATUS_AFTER_EVENT: Hold
    display: x=431,y=91,w=99,h=60
    processmap: '[["sub1","tests.workflow/EventInstanceDeadlock-Sub1","[0.1,1)",""],["sub2","tests.workflow/EventInstanceDeadlock-Sub2","[0.1,1)",""],["notify","tests.workflow/EventInstanceDeadlock-Notify","[0.1,1)",""]]'
    synchronous: 'false'
  links:
  - id: l4
    attributes:
      display: type=Elbow,x=561,y=123,xs=534&586,ys=123&123
    to: s2
- id: s4
  name: Build Plan
  path: flowbee-demo.script.ScriptExecutorActivity
  attributes:
    Output Documents: plan
    Rule: ""
    SCRIPT: Groovy
    display: x=284,y=91,w=103,h=61
  links:
  - id: l3
    attributes:
      display: type=Elbow,x=415,y=121,xs=391&427,ys=121&121
    to: s3
- id: s5
  name: "Publish\r\nFirst?"
  path: flowbee-demo.decision
  attributes:
    Expression: publishFirst
    SCRIPT: Groovy
    display: x=148,y=97,w=80,h=57
  links:
  - id: l5
    attributes:
      display: type=Elbow,x=235,y=127,xs=232&280,ys=124&124
    to: s4
    result: 'false'
  - id: l6
    attributes:
      display: type=Elbow,x=191,y=179,xs=190&190,ys=158&215
    to: s8
    result: 'true'
- id: s8
  name: Broadcast Update Message
  path: flowbee-demo.event.PublishEventMessage
  attributes:
    Event Name: servicesummary-update-${masterRequestId}
    display: x=153,y=219,w=161,h=61
  links:
  - id: l7
    attributes:
      display: type=Elbow,x=318,y=175,xs=299&299,ys=215&156
    to: s4
variables:
  plan:
    type: org.yaml.snakeyaml.Yaml
  publishFirst:
    type: java.lang.Boolean
  serviceSummary:
    type: io.limberest.json.Jsonable
  subCount:
    type: java.lang.Integer
