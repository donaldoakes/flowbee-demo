attributes:
  ArrowStyle: ArrowEnd
  NodeStyle: BoxIcon
  PROCESS_VISIBILITY: PUBLIC
  display: x=26,y=31,w=115,h=27
steps:
- id: S1
  name: Start
  path: flowbee-demo.start
  attributes:
    display: x=25,y=300,w=60,h=40
  links:
  - id: L1
    attributes:
      display: type=Elbow,x=126,y=309,xs=89&143,ys=320&320
    to: S4
- id: S2
  name: Stop
  path: flowbee-demo.stop
  attributes:
    display: x=968,y=221,w=60,h=40
- id: S3
  name: "Synchronous Cloud\r\nJMS Request"
  path: flowbee-demo.adapter.jms.JmsAdapter
  attributes:
    DO_LOGGING: 'True'
    PostScriptLang: Groovy
    PreScriptLang: Groovy
    Queue Name: external.event.queue
    REQUEST_VARIABLE: request
    RESPONSE_VARIABLE: syncResponse
    Wait for response?: 'True'
    display: x=403,y=10,w=125,h=72
  links:
  - id: L16
    attributes:
      display: type=Elbow,x=648,y=69,xs=532&765,ys=69&69
    to: S12
- id: S4
  name: Synchronous?
  path: flowbee-demo.decision
  attributes:
    Expression: mode
    SCRIPT: Groovy
    display: x=147,y=284,w=95,h=74
  links:
  - id: L7
    attributes:
      display: type=Elbow,x=365,y=205,xs=194&424,ys=286&155
    to: S6
    result: Synchronous
  - id: L13
    attributes:
      display: type=Elbow,x=314,y=421,xs=194&429,ys=357&537
    to: S9
    result: Asynchronous
- id: S6
  name: Platform?
  path: flowbee-demo.decision
  attributes:
    Expression: platform
    SCRIPT: Groovy
    display: x=428,y=118,w=95,h=74
  links:
  - id: L6
    attributes:
      display: type=Elbow,x=475,y=100,xs=475&475,ys=114&86
    to: S3
    result: Cloud
  - id: L8
    attributes:
      display: type=Elbow,x=475,y=193,xs=475&475,ys=196&217
    to: S7
    result: OSGi
- id: S7
  name: "Synchronous OSGi\r\nJMS Request"
  path: flowbee-demo.adapter.jms.JmsAdapter
  attributes:
    DO_LOGGING: 'True'
    JNDI Server URL: flowbee-demo-activemq
    PostScriptLang: Groovy
    PreScriptLang: Groovy
    Queue Name: external.event.queue
    REQUEST_VARIABLE: request
    RESPONSE_VARIABLE: syncResponse
    Wait for response?: 'True'
    display: x=411,y=221,w=129,h=70
  links:
  - id: L17
    attributes:
      display: type=Elbow,x=654,y=175,xs=544&765,ys=256&93
    to: S12
- id: S8
  name: "Asynchronous Cloud\r\nJMS Request"
  path: flowbee-demo.adapter.jms.JmsAdapter
  attributes:
    DO_LOGGING: 'True'
    PostScriptLang: Groovy
    PreScriptLang: Groovy
    Queue Name: external.event.queue
    REQUEST_VARIABLE: request
    RESPONSE_VARIABLE: syncResponse
    Wait for response?: 'False'
    display: x=413,y=385,w=125,h=72
  links:
  - id: L14
    attributes:
      display: type=Elbow,x=769,y=349,xs=542&964,ys=421&241
    to: S2
- id: S9
  name: Platform?
  path: flowbee-demo.decision
  attributes:
    Expression: platform
    SCRIPT: Groovy
    display: x=433,y=500,w=95,h=74
  links:
  - id: L11
    attributes:
      display: type=Elbow,x=480,y=469,xs=480&480,ys=496&461
    to: S8
    result: Cloud
  - id: L12
    attributes:
      display: type=Elbow,x=486,y=591,xs=480&480,ys=578&598
    to: S10
    result: OSGi
- id: S10
  name: "Asynchronous OSGi\r\nJMS Request"
  path: flowbee-demo.adapter.jms.JmsAdapter
  attributes:
    DO_LOGGING: 'True'
    JNDI Server URL: flowbee-demo-activemq
    PostScriptLang: Groovy
    PreScriptLang: Groovy
    Queue Name: external.event.queue
    REQUEST_VARIABLE: request
    RESPONSE_VARIABLE: syncResponse
    Wait for response?: 'False'
    display: x=411,y=602,w=129,h=70
  links:
  - id: L15
    attributes:
      display: type=Elbow,x=775,y=454,xs=544&964,ys=637&241
    to: S2
- id: S12
  name: "Set Response\r\nJMS Message Id"
  path: flowbee-demo.java.DynamicJavaActivity
  attributes:
    DESCRIPTION: For synchronous calls, grabs the jmsmessage Id from the <RequestId> field in the StatusMessage reponse, to help match with expected results
    Java: ""
    display: x=769,y=57,w=100,h=73
  links:
  - id: L18
    attributes:
      display: type=Elbow,x=935,y=154,xs=873&998,ys=93&217
    to: S2
variables:
  asyncResponse:
    type: org.w3c.dom.Document
  jmsMessageId:
    type: java.lang.String
  mode:
    type: java.lang.String
  platform:
    type: java.lang.String
  request:
    type: model.StringDocument
  syncResponse:
    type: org.apache.xmlbeans.XmlObject
