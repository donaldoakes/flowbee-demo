attributes:
  ArrowStyle: ArrowEnd
  NodeStyle: BoxIcon
  PROCESS_VISIBILITY: PUBLIC
  display: x=26,y=31,w=115,h=27
steps:
- id: s1
  name: Start
  path: flowbee-demo.start
  attributes:
    display: x=25,y=300,w=60,h=40
  links:
  - id: l1
    attributes:
      display: type=Elbow,x=126,y=309,xs=89&143,ys=320&320
    to: s4
- id: s2
  name: Stop
  path: flowbee-demo.stop
  attributes:
    display: x=968,y=221,w=60,h=40
- id: s3
  name: "Synchronous Cloud\r\nJMS Request"
  path: flowbee-demo.adapter.jms.JmsAdapter
  attributes:
    DO_LOGGING: 'True'
    PostScriptLang: Groovy
    PreScriptLang: Groovy
    Queue Name: external.event.queue
    REQUEST_VARIABLE: request
    RESPONSE_VARIABLE: syncResponse
    Wait for response?: 'True'
    display: x=403,y=10,w=125,h=72
  links:
  - id: l16
    attributes:
      display: type=Elbow,x=648,y=69,xs=532&765,ys=69&69
    to: s12
- id: s4
  name: Synchronous?
  path: flowbee-demo.decision
  attributes:
    Expression: mode
    SCRIPT: Groovy
    display: x=147,y=284,w=95,h=74
  links:
  - id: l7
    attributes:
      display: type=Elbow,x=365,y=205,xs=194&424,ys=286&155
    to: s6
    result: Synchronous
  - id: l13
    attributes:
      display: type=Elbow,x=314,y=421,xs=194&429,ys=357&537
    to: s9
    result: Asynchronous
- id: s6
  name: Platform?
  path: flowbee-demo.decision
  attributes:
    Expression: platform
    SCRIPT: Groovy
    display: x=428,y=118,w=95,h=74
  links:
  - id: l6
    attributes:
      display: type=Elbow,x=475,y=100,xs=475&475,ys=114&86
    to: s3
    result: Cloud
  - id: l8
    attributes:
      display: type=Elbow,x=475,y=193,xs=475&475,ys=196&217
    to: s7
    result: OSGi
- id: s7
  name: "Synchronous OSGi\r\nJMS Request"
  path: flowbee-demo.adapter.jms.JmsAdapter
  attributes:
    DO_LOGGING: 'True'
    JNDI Server URL: flowbee-demo-activemq
    PostScriptLang: Groovy
    PreScriptLang: Groovy
    Queue Name: external.event.queue
    REQUEST_VARIABLE: request
    RESPONSE_VARIABLE: syncResponse
    Wait for response?: 'True'
    display: x=411,y=221,w=129,h=70
  links:
  - id: l17
    attributes:
      display: type=Elbow,x=654,y=175,xs=544&765,ys=256&93
    to: s12
- id: s8
  name: "Asynchronous Cloud\r\nJMS Request"
  path: flowbee-demo.adapter.jms.JmsAdapter
  attributes:
    DO_LOGGING: 'True'
    PostScriptLang: Groovy
    PreScriptLang: Groovy
    Queue Name: external.event.queue
    REQUEST_VARIABLE: request
    RESPONSE_VARIABLE: syncResponse
    Wait for response?: 'False'
    display: x=413,y=385,w=125,h=72
  links:
  - id: l14
    attributes:
      display: type=Elbow,x=769,y=349,xs=542&964,ys=421&241
    to: s2
- id: s9
  name: Platform?
  path: flowbee-demo.decision
  attributes:
    Expression: platform
    SCRIPT: Groovy
    display: x=433,y=500,w=95,h=74
  links:
  - id: l11
    attributes:
      display: type=Elbow,x=480,y=469,xs=480&480,ys=496&461
    to: s8
    result: Cloud
  - id: l12
    attributes:
      display: type=Elbow,x=486,y=591,xs=480&480,ys=578&598
    to: s10
    result: OSGi
- id: s10
  name: "Asynchronous OSGi\r\nJMS Request"
  path: flowbee-demo.adapter.jms.JmsAdapter
  attributes:
    DO_LOGGING: 'True'
    JNDI Server URL: flowbee-demo-activemq
    PostScriptLang: Groovy
    PreScriptLang: Groovy
    Queue Name: external.event.queue
    REQUEST_VARIABLE: request
    RESPONSE_VARIABLE: syncResponse
    Wait for response?: 'False'
    display: x=411,y=602,w=129,h=70
  links:
  - id: l15
    attributes:
      display: type=Elbow,x=775,y=454,xs=544&964,ys=637&241
    to: s2
- id: s12
  name: "Set Response\r\nJMS Message Id"
  path: flowbee-demo.java.DynamicJavaActivity
  attributes:
    DESCRIPTION: For synchronous calls, grabs the jmsmessage Id from the <RequestId> field in the StatusMessage reponse, to help match with expected results
    Java: ""
    display: x=769,y=57,w=100,h=73
  links:
  - id: l18
    attributes:
      display: type=Elbow,x=935,y=154,xs=873&998,ys=93&217
    to: s2
variables:
  asyncResponse:
    type: org.w3c.dom.Document
  jmsMessageId:
    type: java.lang.String
  mode:
    type: java.lang.String
  platform:
    type: java.lang.String
  request:
    type: model.StringDocument
  syncResponse:
    type: org.apache.xmlbeans.XmlObject
